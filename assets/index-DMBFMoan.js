/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{p as T}from"./production.stroe-CFizOJrI.js";import{h,i as w,g as z}from"./index-TU1_PalU.js";import{d as U,r as g,a as _,U as $,x as q,c as D,o as y,b as c,f as n,w as s,q as f,V as E,R as L,W as M,h as m,O as R,z as F,p as W,X as G,a9 as H,u as J,_ as Q}from"./index-Bgo2cMrw.js";const Y={class:"productsManage w-full h-full rounded-b-xl flex flex-col bg-main-bgColor p-6"},Z={class:"flex items-center justify-between mb-6"},tt={class:"flex items-center gap-x-4"},et={class:"flex-1 w-full bg-white rounded-lg shadow p-4 overflow-auto"},ot=U({__name:"index",setup(at){let l=g(!1),o=_({productions:[],totial:0});const b=T(),C=J(),u=g({pageSize:5,total:0,showTotal:!0}),k=[{title:"产品名",dataIndex:"name"},{title:"图片",slotName:"image"},{title:"时间",dataIndex:"createTime"},{title:"状态",dataIndex:"status",slotName:"status"},{title:"操作",slotName:"action"}],X=e=>{console.log(e,"XXXXXXXX")},N=async e=>{const t=await z(e);Object.assign(o,t),l.value=!1},v=e=>"https://websarvice-190762-4-1381433578.sh.run.tcloudbase.com/xya/"+e,P=async(e,t)=>{},i=g([]),B=_({type:"checkbox",onlyCurrent:!0}),I=async e=>{try{const t=await w(e.id);console.log(t),o.productions=o.productions.filter(d=>d.id!=e.id)}catch{}};function j(e){Object.assign(b.Production,e),C.push({name:"productPage_1",params:{id:e.id}}),console.log(1)}function A(e){l.value=!e,l.value?o.productions.forEach(t=>{i.value.push(Number(t.id))}):i.value=[]}async function O(){const e=i.value.map(t=>w(t));try{await Promise.all(e),o.productions=[]}catch(t){throw console.error("批量删除失败",t),t}}return $([()=>i.value,()=>o.productions.length,()=>i.value.length],async(e,t)=>{if(e[1]!==t[1]){const d=await h();Object.assign(o,d),o.productions.map(r=>(r.image.includes("/xya/")||(r.image=v(r.image)),r)),u.value.total=o.totial,console.log(u.value.total,o.totial,"xxxxxxxxxxxx")}e[2]===e[1]?l.value=!0:l.value=!1}),q(async()=>{const e=await h();Object.assign(o,e),o.productions.map(t=>(t.image=v(t.image),t)),u.value.total=e.totial,console.log(u.value.total,o.totial,"xxxxxxxxxxxx")}),(e,t)=>{const d=E,r=R("router-link"),p=L,S=H,V=G,K=M;return y(),D("div",Y,[t[9]||(t[9]=c("div",{class:"mb-6"},[c("p",{class:"text-3xl text-[#3F2B96]"}," 全部产品 ")],-1)),c("div",Z,[n(d,{"model-value":f(l),onChange:t[0]||(t[0]=a=>A(f(l)))},{default:s(()=>[...t[2]||(t[2]=[m(" 全选 ",-1)])]),_:1},8,["model-value"]),c("div",tt,[n(p,{type:"primary",shape:"round",class:"w-[8vw]"},{default:s(()=>[n(r,{to:{name:"productPage_1"}},{default:s(()=>[...t[3]||(t[3]=[m("添加产品",-1)])]),_:1})]),_:1}),n(p,{type:"text",class:"w-[4vw]",onClick:O},{default:s(()=>[...t[4]||(t[4]=[m("批量删除",-1)])]),_:1})])]),c("div",et,[n(K,{"show-header":!0,columns:k,data:f(o).productions,"row-class":"common-row","row-key":"id","row-selection":B,"column-resizable":"",bordered:{cell:!1},pagination:u.value,selectedKeys:i.value,"onUpdate:selectedKeys":t[1]||(t[1]=a=>i.value=a),onChange:X,onPageChange:N},{tr:s(()=>[...t[5]||(t[5]=[c("tr",{class:"my-tr"},null,-1)])]),td:s(()=>[...t[6]||(t[6]=[c("td",{class:"my-td"},null,-1)])]),image:s(({record:a})=>[n(S,{style:{width:"6rem",height:"6rem"},src:a.image},null,8,["src"])]),action:s(({record:a})=>[n(p,{type:"text",onClick:x=>j(a)},{default:s(()=>[...t[7]||(t[7]=[m("编辑",-1)])]),_:1},8,["onClick"]),n(p,{type:"text",status:"danger",onClick:x=>I(a)},{default:s(()=>[...t[8]||(t[8]=[m("删除",-1)])]),_:1},8,["onClick"])]),status:s(({record:a})=>[a.status!=="null"?(y(),F(V,{key:0,"default-checked":a.status===1,onChange:x=>P(x,a)},null,8,["default-checked","onChange"])):W("",!0)]),_:1},8,["data","row-selection","pagination","selectedKeys","onPageChange"])])])}}}),pt=Q(ot,[["__scopeId","data-v-95085a69"]]);export{pt as default};
