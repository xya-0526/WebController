/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{g as f,D as w}from"./index-TU1_PalU.js";import{d as V,r as g,a as x,U as K,x as T,c as z,o as y,b as i,f as r,w as s,q as v,V as D,R as $,W as q,h as d,O as E,z as M,p as R,u as U,X as F,_ as L}from"./index-Bgo2cMrw.js";import{a as W}from"./artical.store-DswWk2_S.js";const G={class:"productsManage w-full h-full rounded-b-xl flex flex-col bg-main-bgColor p-6"},H={class:"flex items-center justify-between mb-6"},J={class:"flex items-center gap-x-4"},Q={class:"flex-1 w-full bg-white rounded-lg shadow p-4 overflow-auto"},Y=V({__name:"index",setup(Z){let n=g(!1),a=x({articals:[],totial:0});const _=W(),h=U(),m=g({pageSize:5,total:0,showTotal:!0}),b=[{title:"文章名",dataIndex:"title"},{title:"类型",dataIndex:"category"},{title:"时间",dataIndex:"createTime"},{title:"状态",dataIndex:"status",slotName:"status"},{title:"操作",slotName:"action"}],C=e=>{console.log(e,"XXXXXXXX")},k=async e=>{const t=await f(e);Object.assign(a,t),n.value=!1},X=async(e,t)=>{},o=g([]),A=x({type:"checkbox",onlyCurrent:!0}),N=async e=>{try{const t=await w(e.id);console.log(t),a.articals=a.articals.filter(c=>c.id!=e.id)}catch{}};function B(e){Object.assign(_.Artical,e),h.push({name:"articalPage_1",params:{id:e.id}})}function S(e){n.value=!e,n.value?a.articals.forEach(t=>{o.value.push(Number(t.id))}):o.value=o.value.filter(t=>t!=t)}async function j(){const e=o.value.map(t=>w(t));try{await Promise.all(e),a.articals=[]}catch(t){throw console.error("批量删除失败",t),t}}return K([()=>o.value,()=>a.articals.length,()=>o.value.length],async(e,t)=>{if(e[1]!==t[1]){const c=await f();Object.assign(a,c),m.value.total=a.totial}e[2]===e[1]?n.value=!0:n.value=!1}),T(async()=>{const e=await f();Object.assign(a,e),m.value.total=a.totial}),(e,t)=>{const c=D,I=E("router-link"),u=$,O=F,P=q;return y(),z("div",G,[t[9]||(t[9]=i("div",{class:"mb-6"},[i("p",{class:"text-3xl text-[#3F2B96]"}," 全部文章 ")],-1)),i("div",H,[r(c,{"model-value":v(n),onChange:t[0]||(t[0]=l=>S(v(n)))},{default:s(()=>[...t[2]||(t[2]=[d(" 全选 ",-1)])]),_:1},8,["model-value"]),i("div",J,[r(u,{type:"primary",shape:"round",class:"w-[8vw]"},{default:s(()=>[r(I,{to:{name:"articalPage_1"}},{default:s(()=>[...t[3]||(t[3]=[d("添加文章",-1)])]),_:1})]),_:1}),r(u,{type:"text",class:"w-[4vw]",onClick:j},{default:s(()=>[...t[4]||(t[4]=[d("批量删除",-1)])]),_:1})])]),i("div",Q,[r(P,{"show-header":!0,columns:b,data:v(a).articals,"row-class":"common-row","row-key":"id","row-selection":A,"column-resizable":"",bordered:{cell:!1},pagination:m.value,selectedKeys:o.value,"onUpdate:selectedKeys":t[1]||(t[1]=l=>o.value=l),onChange:C,onPageChange:k},{tr:s(()=>[...t[5]||(t[5]=[i("tr",{class:"my-tr"},null,-1)])]),td:s(()=>[...t[6]||(t[6]=[i("td",{class:"my-td"},null,-1)])]),action:s(({record:l})=>[r(u,{type:"text",onClick:p=>B(l)},{default:s(()=>[...t[7]||(t[7]=[d("编辑",-1)])]),_:1},8,["onClick"]),r(u,{type:"text",status:"danger",onClick:p=>N(l)},{default:s(()=>[...t[8]||(t[8]=[d("删除",-1)])]),_:1},8,["onClick"])]),status:s(({record:l})=>[l.status!=="null"?(y(),M(O,{key:0,"default-checked":l.status===1,onChange:p=>X(p,l)},null,8,["default-checked","onChange"])):R("",!0)]),_:1},8,["data","row-selection","pagination","selectedKeys","onPageChange"])])])}}}),ct=L(Y,[["__scopeId","data-v-a7c8352c"]]);export{ct as default};
