import{d as g,l as b,g as S,v as w,o as p,c as f,_ as $,Y as A,b as c,e as k,f as m,O as C,z as x,R as N,w as y,h as _,s as O,Z as T,a as U,x as P,$ as j,a0 as B,t as I,q as V}from"./index-Bgo2cMrw.js";/* empty css              *//* empty css              */import{c as R,d as J}from"./index-TU1_PalU.js";import{a as E}from"./artical.store-DswWk2_S.js";const M=g({__name:"ArticleTitle",props:{modelValue:{}},emits:["update:modelValue"],setup(r,{emit:t}){const o=r,s=t,a=b({get:()=>o.modelValue,set:l=>s("update:modelValue",l)});return(l,e)=>S((p(),f("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),type:"text",placeholder:"请输入文章标题...",class:"w-full text-3xl font-bold text-gray-900 border-0 border-b-3 border-gray-200 px-3 py-4 placeholder-gray-400 focus:outline-none focus:border-purple-500 transition-all duration-300 bg-white rounded-t-xl shadow-sm"},null,512)),[[w,a.value]])}}),D=$(M,[["__scopeId","data-v-6879bf33"]]),q={class:"flex flex-col md:flex-row gap-4"},z=g({__name:"ArticleMeta ",props:{category:{}},emits:["update:category","update:tags"],setup(r,{emit:t}){const o=r,s=t,a=b({get:()=>o.category,set:l=>s("update:category",l)});return(l,e)=>(p(),f("div",q,[S(c("select",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),class:"border border-gray-300 rounded-lg px-3 py-2 text-gray-800 focus:ring-2 focus:ring-blue-500 focus:outline-none"},[...e[1]||(e[1]=[k('<option value=""> 选择分类 </option><option value="Nest"> Nest.js </option><option value="ES6"> ES6 </option><option value="JavaScript"> JavaScript </option><option value="Css"> Css </option><option value="TypeScript"> TypeScript </option><option value="TypeScript"> Vue </option><option value="TypeScript"> React </option>',8)])],512),[[A,a.value]])]))}}),Y={class:"w-full h-[100%]"},Z=g({__name:"ArticleEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(r,{emit:t}){const o=r,s=t,a=b({get:()=>o.modelValue,set:l=>s("update:modelValue",l)});return(l,e)=>{const i=C("v-md-editor");return p(),f("div",Y,[m(i,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=v=>a.value=v),height:"100%",class:"rounded-xl border border-gray-200 shadow-md overflow-hidden transition-all hover:shadow-lg"},null,8,["modelValue"])])}}}),F={class:"flex gap-3"},G=g({__name:"ArticleActions",props:{id:{}},emits:["save","publish","updata"],setup(r){return(t,o)=>{const s=N;return p(),f("div",F,[m(s,{type:"primary",shape:"round",onClick:o[0]||(o[0]=a=>t.$emit("save"))},{default:y(()=>[...o[3]||(o[3]=[_("保存草稿",-1)])]),_:1}),t.id?(p(),x(s,{key:1,type:"primary",shape:"round",onClick:o[2]||(o[2]=a=>t.$emit("updata"))},{default:y(()=>[...o[5]||(o[5]=[_("更新文章",-1)])]),_:1})):(p(),x(s,{key:0,type:"primary",shape:"round",onClick:o[1]||(o[1]=a=>t.$emit("publish"))},{default:y(()=>[...o[4]||(o[4]=[_("发布文章",-1)])]),_:1}))])}}}),H={class:"relative w-full h-full"},K={class:"text-[2rem] font-bold text-gray-900 tracking-tight absolute top-2 left-1/2 -translate-x-1/2 my-6"},L={class:"w-[50%] absolute top-20 left-1/2 -translate-x-1/2"},Q={class:"w-[50%] absolute top-20 left-[85%]"},W={class:"w-[95%] h-[65vh] top-[9rem] left-1/2 -translate-x-1/2 absolute"},X={class:"absolute left-5/6 bottom-1"},le=g({__name:"index",setup(r){const t=j(),{Artical:o}=O(E());let{title:s,category:a,content:l}=T(o.value);const e=U({title:"",category:"",content:""}),i=()=>{console.log(t.path),sessionStorage.setItem(t.fullPath,JSON.stringify(e)),console.log("保存草稿",e)},v=async()=>{const d=await R(e);alert(d.message),Object.assign(e,{title:"",category:"",content:""}),sessionStorage.removeItem(t.fullPath)},h=async()=>{const d=await J(t.params.id,e);alert(d.message),Object.assign(e,{title:"",category:"",content:""})};return P(()=>{console.log(2),t.params.id&&(console.log(2),Object.assign(e,{title:s.value,category:a.value,content:l.value})),sessionStorage.getItem(t.fullPath)&&(console.log(1),Object.assign(e,JSON.parse(sessionStorage.getItem(t.fullPath))))}),B((d,u)=>{const n=JSON.parse(sessionStorage.getItem(d.fullPath));n&&Object.assign(e,n)}),(d,u)=>(p(),f("div",H,[c("p",K," ✍️ "+I(V(t).params.id?"编辑文章":"发布新文章"),1),c("div",L,[m(D,{modelValue:e.title,"onUpdate:modelValue":u[0]||(u[0]=n=>e.title=n)},null,8,["modelValue"])]),c("div",Q,[m(z,{category:e.category,"onUpdate:category":u[1]||(u[1]=n=>e.category=n)},null,8,["category"])]),c("div",W,[m(Z,{modelValue:e.content,"onUpdate:modelValue":u[2]||(u[2]=n=>e.content=n)},null,8,["modelValue"])]),c("div",X,[m(G,{onSave:i,onPublish:v,onUpdata:h,id:V(t).params.id},null,8,["id"])])]))}});export{le as default};
